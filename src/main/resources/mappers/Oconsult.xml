<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="OconsultDao">
<!-- 리스트 -->
	<select id="ghOconsultTotal" resultType="int">
		SELECT count(*) FROM oconsult
	</select>
	
	<select id="ghOconsultListAll" parameterType="Oconsult" resultType="Oconsult">
		SELECT *
		FROM
	 	  (
	 	  	Select rownum rn, a.*
	 	  	From	(select * from oconsult order by odate desc) a
	 	  )
	 	  WHERE rn between #{start} and #{end}
	</select>
	
<!-- 상세페이지 -->
	<select id="ghOconsultSelOne" parameterType="int" resultType="Oconsult">
		select * From oconsult Where rn =#{rn}
	</select>
	
<!-- 수정 -->
	<update id="ghOconsultUpdate" parameterType="Oconsult">
		update oconsult 
		set	   otitle =#{otitle}, owriter =#{owriter},
			   ocontent =#{ocontent} 
		where  onum=#{onum}  
	</update>
	
<!-- 조회수 +1 -->
	<update id="ghOconsultCount" parameterType="int">
		update 	oconsult 
		set 	ocount=ocount+1 
		Where	onum = #{onum}
	</update>
	
<!-- 글쓰기 -->
	<insert id="ghOconsultInsert" parameterType="Oconsult">
		INSERT INTO	oconsult (otitle, owriter, ocontent, onum, opw, odate)
		VALUES (#{otitle}, #{owriter}, #{ocontent}, oconsult_seq.nextval, #{opw}, sysdate) 
	</insert>





</mapper>